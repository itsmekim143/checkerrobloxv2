<!DOCTYPE html>
<html>
<head>
    <title>Advanced Admin Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0b0b0b; color: #fff; padding: 30px; }
        .card { background: #161616; padding: 20px; border-radius: 10px; border: 1px solid #333; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        h2 { color: #00aaff; margin-top: 0; }
        input { padding: 10px; border-radius: 5px; border: 1px solid #444; background: #222; color: #fff; width: 250px; }
        button { padding: 10px 15px; border-radius: 5px; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; margin-left: 5px; }
        .btn-ban { background: #ff4757; color: white; }
        .btn-unban { background: #2ed573; color: white; }
        .btn-ban:hover { background: #ff6b81; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border-bottom: 1px solid #333; text-align: left; }
        th { color: #888; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; }
        .status-shutdown { color: #ff4757; font-weight: bold; }
        .status-active { color: #2ed573; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ID Blacklist Management</h2>
        <p style="color: #888; font-size: 13px;">Enter a <b>Game ID</b>, <b>Creator ID</b>, or <b>Group ID</b> to block the script.</p>
        <input type="text" id="targetId" placeholder="Enter ID here...">
        <button class="btn-ban" onclick="updateBlacklist(true)">BLOCK ID</button>
        <button class="btn-unban" onclick="updateBlacklist(false)">ALLOW ID</button>
    </div>

    <div class="card">
        <h2>Live Security Logs</h2>
        <table>
            <thead>
                <tr>
                    <th>User/Event</th>
                    <th>Game Name</th>
                    <th>Creator ID</th>
                    <th>Status</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody id="logData">
                </tbody>
        </table>
    </div>

    <script>
        const firebaseConfig = {
            databaseURL: "https://robloxadmin-e98ad-default-rtdb.asia-southeast1.firebasedatabase.app",
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Function to Block/Allow IDs (Game, Group, or Creator)
        function updateBlacklist(status) {
            const id = document.getElementById('targetId').value;
            if(id) {
                // Sets the ID as true/false in the blacklist folder
                db.ref('blacklist/' + id).set(status);
                alert("ID " + id + (status ? " has been blocked." : " has been allowed."));
                document.getElementById('targetId').value = "";
            }
        }

        // Real-time listener for logs
        db.ref('logs').limitToLast(15).on('value', (snapshot) => {
            const logTable = document.getElementById('logData');
            logTable.innerHTML = ""; 
            
            snapshot.forEach((childSnapshot) => {
                const data = childSnapshot.val();
                const isShutdown = data.username === "SYSTEM_PROTECTION" || data.time.includes("SHUTDOWN");
                
                const row = `<tr>
                    <td style="color: ${isShutdown ? '#ff4757' : '#1e90ff'}; font-weight: bold;">${data.username}</td>
                    <td>${data.gameName}</td>
                    <td>${data.creator}</td>
                    <td class="${isShutdown ? 'status-shutdown' : 'status-active'}">
                        ${isShutdown ? 'BLOCKED' : 'ACTIVE'}
                    </td>
                    <td style="color: #666;">${data.time}</td>
                </tr>`;
                logTable.innerHTML = row + logTable.innerHTML; 
            });
        });
    </script>
</body>
</html>
