<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GUI Control Panel</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f0f12; color: #ffffff; padding: 30px; }
        .container { max-width: 1000px; margin: auto; }
        .card { background: #1c1c21; padding: 25px; border-radius: 12px; border: 1px solid #333; margin-bottom: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h1, h2 { color: #00a2ff; margin-top: 0; }
        .input-box { display: flex; gap: 10px; margin-bottom: 10px; }
        input { flex: 1; padding: 12px; border-radius: 6px; border: 1px solid #444; background: #000; color: #fff; }
        button { padding: 12px 20px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-block { background: #ff4757; color: white; }
        .btn-allow { background: #2ed573; color: white; }
        .btn-block:hover { background: #ff6b81; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #333; }
        th { color: #888; font-size: 12px; text-transform: uppercase; }
        .status-badge { padding: 5px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .kick { background: rgba(255, 71, 87, 0.2); color: #ff4757; }
        .active { background: rgba(46, 213, 115, 0.2); color: #2ed573; }
    </style>
</head>
<body>

<div class="container">
    <h1>Management Dashboard</h1>

    <div class="card">
        <h2>Security Control</h2>
        <p style="color: #888;">Enter <b>Place ID</b> (from URL), <b>Universe ID</b>, or <b>Username</b>.</p>
        <div class="input-box">
            <input type="text" id="targetInput" placeholder="Enter ID or Name...">
            <button class="btn-block" onclick="updateBlacklist(true)">BLOCK</button>
            <button class="btn-allow" onclick="updateBlacklist(null)">UNBLOCK</button>
        </div>
    </div>

    <div class="card">
        <h2>Global Announcement</h2>
        <p style="color: #888;">Type a message to send to all active servers.</p>
        <div class="input-box">
            <input type="text" id="announcementText" placeholder="Enter message...">
            <button class="btn-allow" onclick="sendAnnouncement()">SEND MESSAGE</button>
            <button class="btn-block" onclick="clearAnnouncement()">CLEAR</button>
        </div>
    </div>

    <div class="card">
        <h2>Live Activity Logs</h2>
        <table>
            <thead>
                <tr>
                    <th>User / System</th>
                    <th>Game & Creator</th>
                    <th>Status</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody id="log-body">
                </tbody>
        </table>
    </div>
</div>

<script>
    // Configuration
    const firebaseConfig = {
        databaseURL: "https://robloxadmin-e98ad-default-rtdb.asia-southeast1.firebasedatabase.app"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Security Blacklist Functions
    function updateBlacklist(state) {
        const target = document.getElementById('targetInput').value.trim();
        if (target) {
            db.ref('blacklist/' + target).set(state)
                .then(() => {
                    alert("Database Updated: " + target);
                    document.getElementById('targetInput').value = "";
                })
                .catch(err => alert("Error: Check your Firebase Rules!"));
        }
    }

    // Global Announcement Functions
    function sendAnnouncement() {
        const msg = document.getElementById('announcementText').value;
        if(msg) {
            db.ref('GlobalMessage').set(msg)
                .then(() => alert("Announcement Sent!"))
                .catch(err => console.error(err));
        }
    }

    function clearAnnouncement() {
        db.ref('GlobalMessage').set("")
            .then(() => alert("Announcement Cleared"));
        document.getElementById('announcementText').value = "";
    }

    // Real-time listener for logs
    db.ref('logs').limitToLast(15).on('value', (snapshot) => {
        const logBody = document.getElementById('log-body');
        logBody.innerHTML = "";
        const items = [];
        
        snapshot.forEach(child => { items.push(child.val()); });
        items.reverse().forEach(data => {
            const isKick = data.username === "SYSTEM_PROTECTION";
            const row = `
                <tr>
                    <td style="color: ${isKick ? '#ff4757' : '#00a2ff'}; font-weight: bold;">${data.username}</td>
                    <td>${data.gameName}<br><small style="color: #666">Creator: ${data.creator}</small></td>
                    <td><span class="status-badge ${isKick ? 'kick' : 'active'}">${isKick ? 'MASS KICK' : 'AUTHORIZED'}</span></td>
                    <td style="color: #888">${data.time}</td>
                </tr>
            `;
            logBody.innerHTML += row;
        });
    });
</script>

</body>
</html>

</body>
</html>
