<!DOCTYPE html>
<html>
<head>
    <title>Direct Admin Console</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #111; color: #eee; padding: 20px; }
        .box { background: #222; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #444; }
        input { padding: 8px; background: #000; color: #fff; border: 1px solid #555; width: 200px; }
        button { padding: 8px 12px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; }
        .red { background: #ff4d4d; color: #fff; }
        .green { background: #2ecc71; color: #fff; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; border-bottom: 1px solid #333; text-align: left; }
        .sys-log { color: #ff4d4d; font-weight: bold; }
    </style>
</head>
<body>

    <div class="box">
        <h2>Blacklist Control</h2>
        <input type="text" id="idInput" placeholder="User, GameID, or CreatorID">
        <button class="red" onclick="save(true)">BLOCK</button>
        <button class="green" onclick="save(false)">ALLOW</button>
    </div>

    <div class="box">
        <h2>Live Logs</h2>
        <table>
            <thead><tr><th>Target</th><th>Game</th><th>Status</th><th>Time</th></tr></thead>
            <tbody id="logs"></tbody>
        </table>
    </div>

<script>
    // Simplified Config - No API Key needed if Rules are public
    const config = {
        databaseURL: "https://robloxadmin-e98ad-default-rtdb.asia-southeast1.firebasedatabase.app"
    };
    firebase.initializeApp(config);
    const db = firebase.database();

    function save(status) {
        const val = document.getElementById('idInput').value;
        if(!val) return;
        db.ref('blacklist/' + val).set(status);
        alert("Updated " + val);
    }

    db.ref('logs').limitToLast(15).on('value', (snap) => {
        const tbody = document.getElementById('logs');
        tbody.innerHTML = "";
        snap.forEach(child => {
            const d = child.val();
            const isSys = d.username === "SYSTEM_PROTECTION";
            tbody.innerHTML = `<tr>
                <td class="${isSys ? 'sys-log' : ''}">${d.username}</td>
                <td>${d.gameName}</td>
                <td>${isSys ? 'MASS KICK' : 'JOINED'}</td>
                <td>${d.time}</td>
            </tr>` + tbody.innerHTML;
        });
    });
</script>
</body>
</html>
